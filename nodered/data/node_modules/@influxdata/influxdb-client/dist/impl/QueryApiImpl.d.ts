import { Observable } from '../observable';
import QueryApi, { QueryOptions } from '../QueryApi';
import { Transport } from '../transport';
import { CommunicationObserver, FluxResultObserver, FluxTableMetaData, Row, AnnotatedCSVResponse } from '../results';
import { ParameterizedQuery } from '../query/flux';
import { APIExecutor } from '../results/ObservableQuery';
export declare class QueryApiImpl implements QueryApi {
    private transport;
    private createCSVResponse;
    private options;
    constructor(transport: Transport, createCSVResponse: (executor: APIExecutor) => AnnotatedCSVResponse, org: string | QueryOptions);
    with(options: Partial<QueryOptions>): QueryApi;
    response(query: string | ParameterizedQuery): AnnotatedCSVResponse;
    lines(query: string | ParameterizedQuery): Observable<string>;
    rows(query: string | ParameterizedQuery): Observable<Row>;
    queryLines(query: string | ParameterizedQuery, consumer: CommunicationObserver<string>): void;
    queryRows(query: string | ParameterizedQuery, consumer: FluxResultObserver<string[]>): void;
    collectRows<T>(query: string | ParameterizedQuery, rowMapper?: (values: string[], tableMeta: FluxTableMetaData) => T | undefined): Promise<Array<T>>;
    collectLines(query: string | ParameterizedQuery): Promise<Array<string>>;
    queryRaw(query: string | ParameterizedQuery): Promise<string>;
    private createExecutor;
    private decorateRequest;
}
export default QueryApiImpl;
//# sourceMappingURL=QueryApiImpl.d.ts.map